<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Botlink C++ Client Library: botlink::Public::XrdConnection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Botlink C++ Client Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>botlink</b></li><li class="navelem"><b>Public</b></li><li class="navelem"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html">XrdConnection</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classbotlink_1_1Public_1_1XrdConnection-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">botlink::Public::XrdConnection Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class used to establish a connection to an XRD.  
 <a href="classbotlink_1_1Public_1_1XrdConnection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="api_8h_source.html">api.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a70b5dfd277f1c511bafa70ba0acc1426"><td class="memItemLeft" align="right" valign="top"><a id="a70b5dfd277f1c511bafa70ba0acc1426"></a>
typedef std::function&lt; void(const <a class="el" href="structbotlink_1_1Public_1_1VideoConfig.html">VideoConfig</a> &amp;config)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a70b5dfd277f1c511bafa70ba0acc1426">VideoConfigCallback</a></td></tr>
<tr class="memdesc:a70b5dfd277f1c511bafa70ba0acc1426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of function called when XRD sends a <a class="el" href="structbotlink_1_1Public_1_1VideoConfig.html" title="XRD video stream configuration.">VideoConfig</a> message. <br /></td></tr>
<tr class="separator:a70b5dfd277f1c511bafa70ba0acc1426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f0d5a7db0525a19aa3b228957396e8e"><td class="memItemLeft" align="right" valign="top"><a id="a0f0d5a7db0525a19aa3b228957396e8e"></a>
typedef std::function&lt; void(<a class="el" href="api_8h.html#a02e2b89ae0b5b09117357d1b6f4dbed2">MessageSource</a> source, const std::vector&lt; uint8_t &gt; &amp;message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a0f0d5a7db0525a19aa3b228957396e8e">LogMessageFn</a></td></tr>
<tr class="memdesc:a0f0d5a7db0525a19aa3b228957396e8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of function used to log an autopilot message. <br /></td></tr>
<tr class="separator:a0f0d5a7db0525a19aa3b228957396e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad9c9fed9b7652dc99ec0821d88c3de87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#ad9c9fed9b7652dc99ec0821d88c3de87">XrdConnection</a> (<a class="el" href="classbotlink_1_1Public_1_1BotlinkApi.html">BotlinkApi</a> &amp;api, const <a class="el" href="structbotlink_1_1Public_1_1Xrd.html">Xrd</a> &amp;xrd, const <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a0f0d5a7db0525a19aa3b228957396e8e">LogMessageFn</a> &amp;logger=nullptr)</td></tr>
<tr class="memdesc:ad9c9fed9b7652dc99ec0821d88c3de87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html" title="A class used to establish a connection to an XRD.">XrdConnection</a>.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#ad9c9fed9b7652dc99ec0821d88c3de87">More...</a><br /></td></tr>
<tr class="separator:ad9c9fed9b7652dc99ec0821d88c3de87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a232d83682370be7d5dcbae25e958918e"><td class="memItemLeft" align="right" valign="top">std::future&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e">open</a> (std::chrono::seconds timeout)</td></tr>
<tr class="memdesc:a232d83682370be7d5dcbae25e958918e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a connection to the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e">More...</a><br /></td></tr>
<tr class="separator:a232d83682370be7d5dcbae25e958918e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fbc4f08c64ba23d2e2e4a5fbf3b658"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a87fbc4f08c64ba23d2e2e4a5fbf3b658">cancelOpen</a> ()</td></tr>
<tr class="memdesc:a87fbc4f08c64ba23d2e2e4a5fbf3b658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels a connection attempt that is in progress.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a87fbc4f08c64ba23d2e2e4a5fbf3b658">More...</a><br /></td></tr>
<tr class="separator:a87fbc4f08c64ba23d2e2e4a5fbf3b658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf09a7418c4d312350cbd5d5cc33b994"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#acf09a7418c4d312350cbd5d5cc33b994">close</a> ()</td></tr>
<tr class="memdesc:acf09a7418c4d312350cbd5d5cc33b994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a connection.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#acf09a7418c4d312350cbd5d5cc33b994">More...</a><br /></td></tr>
<tr class="separator:acf09a7418c4d312350cbd5d5cc33b994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c02218aa1e4674e8a8383d00a19d065"><td class="memItemLeft" align="right" valign="top">std::future&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a7c02218aa1e4674e8a8383d00a19d065">reconnect</a> (std::chrono::seconds timeout)</td></tr>
<tr class="memdesc:a7c02218aa1e4674e8a8383d00a19d065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconnects to the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a7c02218aa1e4674e8a8383d00a19d065">More...</a><br /></td></tr>
<tr class="separator:a7c02218aa1e4674e8a8383d00a19d065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd33ca1bf28577ed51c8ff391ccf773b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#abd33ca1bf28577ed51c8ff391ccf773b">isConnected</a> ()</td></tr>
<tr class="memdesc:abd33ca1bf28577ed51c8ff391ccf773b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query if connected to the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#abd33ca1bf28577ed51c8ff391ccf773b">More...</a><br /></td></tr>
<tr class="separator:abd33ca1bf28577ed51c8ff391ccf773b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38b09fe0b1b736b157d82fa75cf217d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a38b09fe0b1b736b157d82fa75cf217d9">sendAutopilotMessage</a> (std::vector&lt; uint8_t &gt; &amp;message)</td></tr>
<tr class="memdesc:a38b09fe0b1b736b157d82fa75cf217d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an autopilot message to the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a38b09fe0b1b736b157d82fa75cf217d9">More...</a><br /></td></tr>
<tr class="separator:a38b09fe0b1b736b157d82fa75cf217d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626d9cb40b9012a5912c5db7b43a7fd1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a626d9cb40b9012a5912c5db7b43a7fd1">getAutopilotMessage</a> (bool block)</td></tr>
<tr class="memdesc:a626d9cb40b9012a5912c5db7b43a7fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an autopilot message from the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a626d9cb40b9012a5912c5db7b43a7fd1">More...</a><br /></td></tr>
<tr class="separator:a626d9cb40b9012a5912c5db7b43a7fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ed9a5c318a70054bd422d8e7033e6e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a40ed9a5c318a70054bd422d8e7033e6e">getAutopilotMessage</a> (std::chrono::milliseconds timeout)</td></tr>
<tr class="memdesc:a40ed9a5c318a70054bd422d8e7033e6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an autopilot message from the XRD with a timeout.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a40ed9a5c318a70054bd422d8e7033e6e">More...</a><br /></td></tr>
<tr class="separator:a40ed9a5c318a70054bd422d8e7033e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab430a6b3a21230283b55630d3fbb2adb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#ab430a6b3a21230283b55630d3fbb2adb">addVideoTrack</a> (const std::function&lt; void(uint8_t *packet, size_t length)&gt; &amp;callback)</td></tr>
<tr class="memdesc:ab430a6b3a21230283b55630d3fbb2adb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a video track to the <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html" title="A class used to establish a connection to an XRD.">XrdConnection</a>.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#ab430a6b3a21230283b55630d3fbb2adb">More...</a><br /></td></tr>
<tr class="separator:ab430a6b3a21230283b55630d3fbb2adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a336c64abdc8a54a45ec30e49d4e82cee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a336c64abdc8a54a45ec30e49d4e82cee">setVideoConfig</a> (const <a class="el" href="structbotlink_1_1Public_1_1VideoConfig.html">VideoConfig</a> &amp;config)</td></tr>
<tr class="memdesc:a336c64abdc8a54a45ec30e49d4e82cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to the XRD requesting a change in the resolution, framerate, and codec of the video track's stream.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#a336c64abdc8a54a45ec30e49d4e82cee">More...</a><br /></td></tr>
<tr class="separator:a336c64abdc8a54a45ec30e49d4e82cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae03f935725b53b013551e98bc1b5fc40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#ae03f935725b53b013551e98bc1b5fc40">onVideoConfigReply</a> (const <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a70b5dfd277f1c511bafa70ba0acc1426">VideoConfigCallback</a> &amp;callback)</td></tr>
<tr class="memdesc:ae03f935725b53b013551e98bc1b5fc40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a callback for receiving a video config message from the XRD.  <a href="classbotlink_1_1Public_1_1XrdConnection.html#ae03f935725b53b013551e98bc1b5fc40">More...</a><br /></td></tr>
<tr class="separator:ae03f935725b53b013551e98bc1b5fc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class used to establish a connection to an XRD. </p>
<dl class="section note"><dt>Note</dt><dd>This class is partially threadsafe. The member functions used for managing the connection should only be called from one thread. The member functions for sending and receiving messages are threadsafe. However, it is the user's responsibility to synchronize the thread(s) sending and receiving messages with the thread that manages the connection so that no threads are sending or receiving messages when <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#acf09a7418c4d312350cbd5d5cc33b994" title="Closes a connection.">close()</a> is called. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad9c9fed9b7652dc99ec0821d88c3de87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c9fed9b7652dc99ec0821d88c3de87">&#9670;&nbsp;</a></span>XrdConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">botlink::Public::XrdConnection::XrdConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbotlink_1_1Public_1_1BotlinkApi.html">BotlinkApi</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbotlink_1_1Public_1_1Xrd.html">Xrd</a> &amp;&#160;</td>
          <td class="paramname"><em>xrd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a0f0d5a7db0525a19aa3b228957396e8e">LogMessageFn</a> &amp;&#160;</td>
          <td class="paramname"><em>logger</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html" title="A class used to establish a connection to an XRD.">XrdConnection</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Instance of <a class="el" href="classbotlink_1_1Public_1_1BotlinkApi.html" title="A class used to interact with Botlink&#39;s cloud API.">BotlinkApi</a> uses for authentication </td></tr>
    <tr><td class="paramname">xrd</td><td>The XRD to which to connect </td></tr>
    <tr><td class="paramname">logger</td><td>(optional) a function used to log autopilot messages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab430a6b3a21230283b55630d3fbb2adb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab430a6b3a21230283b55630d3fbb2adb">&#9670;&nbsp;</a></span>addVideoTrack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void botlink::Public::XrdConnection::addVideoTrack </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(uint8_t *packet, size_t length)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a video track to the <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html" title="A class used to establish a connection to an XRD.">XrdConnection</a>. </p>
<dl class="section note"><dt>Note</dt><dd>The current implementation requires calling this before <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e" title="Opens a connection to the XRD.">open()</a> if video is desired</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>A callback function to receive the video track's RTP packets where the uint8_t* parameter of the callback is a pointer to the RTP packet and the size_t parameter is the size of the packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a87fbc4f08c64ba23d2e2e4a5fbf3b658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87fbc4f08c64ba23d2e2e4a5fbf3b658">&#9670;&nbsp;</a></span>cancelOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void botlink::Public::XrdConnection::cancelOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancels a connection attempt that is in progress. </p>
<dl class="section note"><dt>Note</dt><dd>This blocks until the connection attempt is cancelled.</dd>
<dd>
This function should only be called from one thread.</dd>
<dd>
This has no effect if a connection has already been established or if no connection attempt is in progress.</dd>
<dd>
The future returned by <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e" title="Opens a connection to the XRD.">open()</a> will contain false when the connection is cancelled successfully. </dd></dl>

</div>
</div>
<a id="acf09a7418c4d312350cbd5d5cc33b994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf09a7418c4d312350cbd5d5cc33b994">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool botlink::Public::XrdConnection::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a connection. </p>
<dl class="section note"><dt>Note</dt><dd>This function should only be called from one thread.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>bool true if connection closed successfully, false otherwise </dd></dl>

</div>
</div>
<a id="a626d9cb40b9012a5912c5db7b43a7fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a626d9cb40b9012a5912c5db7b43a7fd1">&#9670;&nbsp;</a></span>getAutopilotMessage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t&gt; botlink::Public::XrdConnection::getAutopilotMessage </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an autopilot message from the XRD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>True to block until message is available, false to attempt to get message in non-blocking manner</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;uint8_t&gt; containing an autopilot message if successful, otherwise empty when no message is available or failure occurred </dd></dl>

</div>
</div>
<a id="a40ed9a5c318a70054bd422d8e7033e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ed9a5c318a70054bd422d8e7033e6e">&#9670;&nbsp;</a></span>getAutopilotMessage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t&gt; botlink::Public::XrdConnection::getAutopilotMessage </td>
          <td>(</td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an autopilot message from the XRD with a timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The number of milliseconds to wait for a message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;uint8_t&gt; containing an autopilot message if successful, otherwise empty when timeout or failure occurred </dd></dl>

</div>
</div>
<a id="abd33ca1bf28577ed51c8ff391ccf773b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd33ca1bf28577ed51c8ff391ccf773b">&#9670;&nbsp;</a></span>isConnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool botlink::Public::XrdConnection::isConnected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query if connected to the XRD. </p>
<dl class="section return"><dt>Returns</dt><dd>bool true if connected, false otherwise </dd></dl>

</div>
</div>
<a id="ae03f935725b53b013551e98bc1b5fc40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03f935725b53b013551e98bc1b5fc40">&#9670;&nbsp;</a></span>onVideoConfigReply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void botlink::Public::XrdConnection::onVideoConfigReply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a70b5dfd277f1c511bafa70ba0acc1426">VideoConfigCallback</a> &amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a callback for receiving a video config message from the XRD. </p>
<dl class="section note"><dt>Note</dt><dd>When a video config message is sent to the XRD, the XRD replies with a video config message. The contents of the reply should be examined in order to know what video config the XRD is actually using.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>The callback function to register </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a232d83682370be7d5dcbae25e958918e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a232d83682370be7d5dcbae25e958918e">&#9670;&nbsp;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::future&lt;bool&gt; botlink::Public::XrdConnection::open </td>
          <td>(</td>
          <td class="paramtype">std::chrono::seconds&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a connection to the XRD. </p>
<p>@detail This opens the connection in a partially non-blocking manner. It initially blocks to use <a class="el" href="classbotlink_1_1Public_1_1BotlinkApi.html" title="A class used to interact with Botlink&#39;s cloud API.">BotlinkApi</a> for cloud access, but then completes opening the connection in a non-blocking manner.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1XrdConnectionError.html" title="An exception for errors connecting to an XRD.">exception::XrdConnectionError</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkRuntime.html" title="An exception due to an issue only detectable at runtime.">exception::BotlinkRuntime</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkLogic.html" title="An exception to indicate error in logic.">exception::BotlinkLogic</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function should only be called from one thread.</dd>
<dd>
The caller must check the value stored in the std::future&lt;bool&gt; returned by this member function or query <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#abd33ca1bf28577ed51c8ff391ccf773b" title="Query if connected to the XRD.">isConnected()</a> to know when the connection has been established</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Number of seconds to wait for the connection to be opened.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::future&lt;bool&gt; containing true if connection opened successfully, containing false if user cancelled a connection attempt by calling <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a87fbc4f08c64ba23d2e2e4a5fbf3b658" title="Cancels a connection attempt that is in progress.">cancelOpen()</a> or if user started a new connection attempt by calling <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e" title="Opens a connection to the XRD.">open()</a> again, or containing an exception if an error or timeout occurred opening the connection </dd></dl>

</div>
</div>
<a id="a7c02218aa1e4674e8a8383d00a19d065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c02218aa1e4674e8a8383d00a19d065">&#9670;&nbsp;</a></span>reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::future&lt;bool&gt; botlink::Public::XrdConnection::reconnect </td>
          <td>(</td>
          <td class="paramtype">std::chrono::seconds&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reconnects to the XRD. </p>
<dl class="section note"><dt>Note</dt><dd>This function should only be called from one thread.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">This</td><td>function may throw the same exceptions as <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e" title="Opens a connection to the XRD.">open()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Number of seconds to wait to reconnect</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>same as <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#a232d83682370be7d5dcbae25e958918e" title="Opens a connection to the XRD.">open()</a> </dd></dl>

</div>
</div>
<a id="a38b09fe0b1b736b157d82fa75cf217d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38b09fe0b1b736b157d82fa75cf217d9">&#9670;&nbsp;</a></span>sendAutopilotMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool botlink::Public::XrdConnection::sendAutopilotMessage </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an autopilot message to the XRD. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkLogic.html" title="An exception to indicate error in logic.">exception::BotlinkLogic</a></td><td>when called and the connection is not open </td></tr>
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkRuntime.html" title="An exception due to an issue only detectable at runtime.">exception::BotlinkRuntime</a></td><td>when an error occurred with sending</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This uses an unreliable transport, so delivery is not guaranteed</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>bool true if sent, false otherwise </dd></dl>

</div>
</div>
<a id="a336c64abdc8a54a45ec30e49d4e82cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a336c64abdc8a54a45ec30e49d4e82cee">&#9670;&nbsp;</a></span>setVideoConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool botlink::Public::XrdConnection::setVideoConfig </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbotlink_1_1Public_1_1VideoConfig.html">VideoConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a message to the XRD requesting a change in the resolution, framerate, and codec of the video track's stream. </p>
<dl class="section note"><dt>Note</dt><dd>The caller should check the video config reply from the XRD to know whether or not the XRD accepted the video configuration. See <a class="el" href="classbotlink_1_1Public_1_1XrdConnection.html#ae03f935725b53b013551e98bc1b5fc40" title="Sets a callback for receiving a video config message from the XRD.">onVideoConfigReply()</a> for more detail.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkLogic.html" title="An exception to indicate error in logic.">exception::BotlinkLogic</a></td><td>when called and the connection is not open </td></tr>
    <tr><td class="paramname"><a class="el" href="classbotlink_1_1Public_1_1exception_1_1BotlinkRuntime.html" title="An exception due to an issue only detectable at runtime.">exception::BotlinkRuntime</a></td><td>when an error occurred with sending the video config</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The video configuration</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool true if the configuration was sent successfully, false otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="api_8h_source.html">api.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
